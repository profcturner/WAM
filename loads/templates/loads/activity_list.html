{% extends "loads/base_automatic.html" %}

{% block content %}

<p class="mb-3">
    Selected year:<br/>
    <span class="font-monospace fw-bold me-2">{{package}}</span> <a class="btn btn-secondary btn-sm wam-hide-on-print" href="{%url 'workpackage_change' %}?next={{ request.path|urlencode }}">Change year</a>
</p>

{% if package.draft or package.in_the_future or package.in_the_past %}
<div class="border border-2 border-danger p-3 rounded-3 mb-5">
    <h6 class="fw-bold">!! Please note these exceptions <i class="fw-normal small">(hover for more information)</i></h6>
    <div class="d-flex">
        {% if package.draft %}
        <div class="badge text-bg-danger me-2"
             title="This is a DRAFT allocation and may be incomplete.">Draft allocation</div>
        {% endif %}
        {% if package.in_the_past %}
        <div class="badge text-bg-danger me-2"
             title="The currently selected Work Package is in the Past! You probably want to change the year above.">Past work package</div>
        {% endif %}
        {% if package.in_the_future %}
        <div class="badge text-bg-danger me-2"
             title="The currently selected Work Package is in the Future">Future work package</div>
        {% endif %}
    </div>
</div>
{% endif %}


<div class="mt-1">
    <h3>Activities</h3>

    <p>These are the custom activities you can add to staff allocations, alongside those automatically generated by module allocation.</p>

    {% if activities %}
    <div class="table-responsive small mt-4">
        <table class="table table-sm table-striped table-hover">
            <thead>
                <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Type</th>
                    <th scope="col">Staff</th>
                    <th scope="col" class="text-center wam-hide-on-print">Edit</th>
                    <th scope="col" class="text-center wam-hide-on-print">Delete</th>
                </tr>
            </thead>
            <tbody class="table-group-divider">
                {% for activity in activities %}
                <tr>
                    <td>{{ activity.name }}</td>
                    <td>{{ activity.activity_type }}</td>
                    <td>{{ activity.staff }}</td>
                    <td class="text-center wam-hide-on-print"><a class="link-opacity-50-hover link-underline-opacity-50 link-offset-2" href="{% url 'update activity' activity.pk %}">Edit</a></td>
                    <td class="text-center wam-hide-on-print"><a class="link-opacity-50-hover link-underline-opacity-50 link-offset-2" href="{% url 'delete activity' activity.pk %}">Delete</a></td>
                {% endfor %}
                </tr>
            </tbody>
        </table>
    </div>
    {% else %}
    <p>
        There are currently no activities.
    </p>
    {% endif %}
</div>

<div class="mt-4 wam-hide-on-print">
    <h4>
        Add activity
    </h4>
    <a class="link-opacity-50-hover link-underline-opacity-50 link-offset-2" href="{% url 'create activity' %}">
        Click here to create a new activity
    </a>
</div>

{% endblock content %}
{% include "loads/header.html" %}
  

{% if combined_list_complete or combined_list_incomplete %}
    <table border="1">
      {% if combined_list_incomplete %}
      <tr>
        <th>Task Name</th><th>Deadline</th><th>Time left</th><th>Status</th><th>Complete</th>
      </tr>
      {% endif %}
      {% for task, urgent, overdue in combined_list_incomplete %}
      <tr class="{% cycle 'row1' 'row2' as rowcolours %}">
        <th>{{ task.name }}</th>
        <td>{{ task.deadline }}</td>
        <td>{{ task.deadline|timeuntil }}</td>
        {% if overdue %}
        <td class="urgent">Overdue<br />{{ task.deadline|timesince }}</td>
        {% elif urgent %}
        <td class="urgent">Urgent</td>
        {% else %}
        <td>Pending</td>
        {% endif %}
        <td><a href="{% url 'tasks_completion' task_id=task.id staff_id=staff.id %}">Complete</a></td>  
      </tr>      
      {% endfor %}
      {% if combined_list_complete %}
      <tr>
        <th>Task Name</th><th>Deadline</th><th>Time left</th><th colspan="2">Completed</th>
      </tr>
      {% endif %}
      {% for task, when in combined_list_complete %}
      <tr class="{% cycle rowcolours %}">
        <th>{{ task.name }}</th>
        <td>{{ task.deadline }}</td>
        <td>{{ task.deadline|timeuntil }}</td>
        <td>{{ when }}</th>
      </tr>      
      {% endfor %}
    </table>
    
    <p>{{ staff }} has {{ combined_list_incomplete|length}} outstanding task{{combined_list_incomplete|length|pluralize}}.</p>
    
{% else %}
    <p>No activities are available for {{ staff }}.</p>
{% endif %}

{{ debug }}

{% include "loads/footer.html" %}